define("metaphorjs-select",function(){function H(k){if(k&&void 0!=!k.length&&k!==""+k){for(var n=[],r=-1,I=k.length>>>0;++r!==I;n[r]=k[r]);return n}return k?[k]:[]}var A={plugin:{},mixin:{},lib:{}};A.dom=A.dom||{};var l=function(k,n){return k.getAttribute?k.getAttribute(n):null},O=function(){var k=[],n=function(r){var n;var B=0;for(n=k.length;B<n;B++)k[B][0].call(k[B][1],r);"undefined"!=typeof console&&console.error&&console.error(r)};n.on=function(r,l){n.un(r,l);k.push([r,l])};n.un=function(n,l){var r;
var z=0;for(r=k.length;z<r;z++)if(k[z][0]===n&&k[z][1]===l){k.splice(z,1);break}};return n}();A.dom.select=function(){var k=/^[\w[:#.][\w\]*^|=!]*$/,n=/=([^\]]+)/,r=/ *, */,A=/(\([^)]*)\+/,B=/(\[[^\]]+)~/,z=/(~|>|\+)/,P=/ +/,Q=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,R=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,S=/\D/,T=/[^(]*\(([^)]*)\)/,U=/\(.*/,V=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,C=window.document,W=!!C.getElementsByClassName,
K=!!C.querySelectorAll,u={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&1!==a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0;b=b[1];if(c)return!((c+d)%b);var h=a.parentNode.firstChild;c++;do if(1===h.nodeType&&(h.nodeIndex=++c)&&a===h&&(c+d)%b)return 0;while(h=h.nextSibling);return 1},"nth-last-child":function(a,
b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0;b=b[1];if(c)return!((c+d)%b);var h=a.parentNode.lastChild;c++;do if(1===h.nodeType&&(h.nodeLastIndex=c++)&&a===h&&(c+d)%b)return 0;while(h=h.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!==a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&C.documentElement.lang!==b},enabled:function(a){return a.disabled||
"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},D={},E=function(a){return D[a]||(D[a]=new RegExp("(^| +)"+a+"($| +)"))},q={"":function(a,b){return null!==l(a,b)},"=":function(a,b,c){var d;return(d=l(a,b))&&d===c},"&=":function(a,b,c){var d;return(d=l(a,b))&&E(c).test(d)},"^=":function(a,b,c){var d;return(d=l(a,b)+"")&&!d.indexOf(c)},"$=":function(a,b,c){var d;return(d=l(a,b)+"")&&d.indexOf(c)===d.length-c.length},"*=":function(a,b,c){var d;return(d=
l(a,b)+"")&&-1!==d.indexOf(c)},"|=":function(a,b,c){var d;return(d=l(a,b)+"")&&(d===c||!!d.indexOf(c+"-"))},"!=":function(a,b,c){var d;return!(d=l(a,b))||!E(c).test(d)}};return function(a,b){b=b||C;var c=[],d=null,h,m,f;if(K&&b.querySelectorAll)try{c=H(b.querySelectorAll(a.replace(n,'="$1"')))}catch(X){O(X),d=!0}if(!K||d)if(k.test(a))switch(d=0,a.charAt(0)){case "#":d=a.slice(1);c=C.getElementById(d);c.id!==d&&(c=C.all[d]);c=c?[c]:[];break;case ".":a=a.slice(1);if(W)c=H((c=b.getElementsByClassName(a)).length?
c:[]);else{a=" "+a+" ";var t=b.getElementsByTagName("*");for(h=0;b=t[h++];)-1!==(" "+b.className+" ").indexOf(a)&&(c[d++]=b);c=d?c:[]}break;case ":":t=b.getElementsByTagName("*");h=0;var l=a.replace(T,"$1");for(m=a.replace(U,"");b=t[h++];)u[m]&&!u[m](b,l)&&(c[d++]=b);c=d?c:[];break;case "[":t=b.getElementsByTagName("*");h=0;b=V.exec(a);a=b[1];var p=b[2]||"";for(f=b[3];b=t[h++];)q[p]&&(q[p](b,a,f)||"class"===a&&q[p](b,"className",f))&&(c[d++]=b);c=d?c:[];break;default:c=H((c=b.getElementsByTagName(a)).length?
c:[])}else{for(var D=a.split(r),E=D.length-1,I=!!E,L,M,g,J,v,w,x,y,N,e,F,G;d=D[E--];){M=(L=d.replace(A,"$1%").replace(B,"$1&").replace(z," $1 ").split(P)).length;h=0;J=" ";for(t=b instanceof DocumentFragment?b.children:[b];g=L[h++];)if(" "!==g&&">"!==g&&"~"!==g&&"+"!==g&&t){g=g.match(Q);v=g[1]||"*";w=g[2];x=g[3]?" "+g[3]+" ":"";a=g[4];p=g[5]||"";m=g[7];l="nth-child"===m||"nth-last-child"===m?R.exec("even"===g[8]&&"2n"||"odd"===g[8]&&"2n%1"||!S.test(g[8])&&"0n%"+g[8]||g[8]):g[8];y=[];d=N=0;for(F=h===
M;e=t[N++];)switch(J){case " ":if(e.getElementsByTagName)for(G=e.getElementsByTagName(v),e=0;f=G[e++];)w&&f.id!==w||x&&-1==(" "+f.className+" ").indexOf(x)||!(!a||q[p]&&(q[p](f,a,g[6])||"class"===a&&q[p](f,"className",g[6])))||f.yeasss||(u[m]?u[m](f,l):m)||(F&&(f.yeasss=1),y[d++]=f);break;case "~":for(v=v.toLowerCase();(e=e.nextSibling)&&!e.yeasss;)1!==e.nodeType||"*"!==v&&e.nodeName.toLowerCase()!==v||w&&e.id!==w||x&&-1===(" "+e.className+" ").indexOf(x)||!(!a||q[p]&&(q[p](f,a,g[6])||"class"===a&&
q[p](f,"className",g[6])))||e.yeasss||(u[m]?u[m](e,l):m)||(F&&(e.yeasss=1),y[d++]=e);break;case "+":for(;(e=e.nextSibling)&&1!==e.nodeType;);!e||e.nodeName.toLowerCase()!==v.toLowerCase()&&"*"!==v||w&&e.id!==w||x&&-1===(" "+f.className+" ").indexOf(x)||!(!a||q[p]&&(q[p](f,a,g[6])||"class"===a&&q[p](f,"className",g[6])))||e.yeasss||(u[m]?u[m](e,l):m)||(F&&(e.yeasss=1),y[d++]=e);break;case ">":if(e.getElementsByTagName)for(G=e.getElementsByTagName(v),h=0;f=G[h++];)f.parentNode!==e||w&&f.id!==w||x&&
-1==(" "+f.className+" ").indexOf(x)||!(!a||q[p]&&(q[p](f,a,g[6])||"class"===a&&q[p](f,"className",g[6])))||f.yeasss||(u[m]?u[m](f,l):m)||(F&&(f.yeasss=1),y[d++]=f)}t=y}else J=g;if(I){if(!t.concat){y=[];for(e=0;f=t[e];)y[e++]=f;t=y}c=t.concat(1===c.length?c[0]:c)}else c=t}for(d=c.length;d--;)c[d].yeasss=c[d].nodeIndex=c[d].nodeIndexLast=null}return c}}();return A.select});
